// =====================================================================================
// 
//       Filename:  test_si_factiorelle.c
// 
//    Description:  Determine si un nombre est factoriel
// 
//        Version:  1.0
//        Created:  03.11.2012 21:02:42
//       Revision:  none
//       Compiler:  clang++
// 
//         Author:  Loïc BARTOLETTI (), coder@tuxfamily.org
//        Company:  
// 
// =====================================================================================

#include <stdio.h>
#include <stdlib.h>

long fact(long n);
int test_fact(long n, long *facteur_n);

int main (int argc, char *argv[])
{
    if (argc != 2)
    {
        fprintf(stderr, "Usage : %s <nombre à tester>\n", argv[0]);
        exit(0);
    }   

    long nombre = strtol(argv[1], NULL, 10);
    long facto;
    int ret = test_fact(nombre, &facto);
    
    if(ret ==1)
    {
        printf("%ld est la factorielle de %ld\n", nombre, facto);
    }
    else
        printf("%ld n'est pas un nombre factoriel\n", nombre);
    return EXIT_SUCCESS;
}

long fact(long n)
{
    long i;
    long resultat=1;
    for(i=1;i<=n;i++)
    {
        resultat *= i;
    }
    return resultat;
}

int test_fact(long n, long *facteur_n)
{
    long nb=1;
    long ok=0;
    facteur_n=0;
    while( (nb < n) && (ok!=1) )
    {
        if(fact(nb) == n)
        {
            puts("la");
            *facteur_n = nb;
            puts("ici");
            ok=1;
        }
        nb++;
    }
    return ok;
}
