#!/bin/tcsh
#!/bin/sh
#
## Detect sound driver
foreach driver (/boot/kernel/snd_*)
  driver=$(echo ${driver} | sed 's|/boot/kernel/snd_||')
    if [ ${driver} = "driver.ko" ]; then
            continue;
              fi
                
                kldload snd_${driver}
                  if [ -c /dev/mixer0 ]; then
                          echo "un pilote a ete trouve : 'snd_${driver}'"
                              echo "ajout du chargement du module dans /boot/loader.conf'"
                                  
                                  echo "## Ajoute par le script detect_sound" >> /boot/loader.conf
                                      echo "snd_${driver}_load=\"YES\""           >> /boot/loader.conf
                                          exit 0
                                            fi
                                              kldunload snd_${driver}
                                              
                                          end
