/*
 * =====================================================================================
 *
 *       Filename:  fibonacci.c
 *
 *    Description:  Fibonacci recursif et iteratif
 *
 *        Version:  1.0
 *        Created:  23.12.2012 16:54:20
 *       Revision:  none
 *       Compiler:  gcc
 *
 *         Author:  Loïc BARTOLETTI (), coder@tuxfamily.org
 *   Organization:  
 *
 * =====================================================================================
 */


#include	<stdio.h>
#include    <stdlib.h>
#include    <time.h>

long fibo_recursif(long nb);
long fibo_iteratif(long nb);
/* 
 * ===  FUNCTION  ======================================================================
 *         Name:  fibo_recursif
 *  Description:  
 * =====================================================================================
 */
long fibo_recursif ( long nb )
{
    if(nb<=1)
        return 1;
    else
        return fibo_recursif(nb-1)+fibo_recursif(nb-2);
}		/* -----  end of function fibo_recursif  ----- */


/* 
 * ===  FUNCTION  ======================================================================
 *         Name:  fibo_iteratif
 *  Description:  
 * =====================================================================================
 */
long fibo_iteratif ( long nb )
{
    long retour=0;
    long fb_m1=1; /* f(n-1) */ 
    long fb_m2=0; /* f(n-2) */

    if(nb <= 0)
        retour = 0;
    else
    {
        int i;
        for (i=0; i< nb-1; i++)
        {
            retour = fb_m1;
            fb_m1 += fb_m2;
            fb_m2 = retour;
        }
        retour = fb_m1;
    }

    return retour;
}		/* -----  end of function fibo_iteratif  ----- */
/* 
 * ===  FUNCTION  ======================================================================
 *         Name:  main
 *  Description:  
 * =====================================================================================
 */
int main ( int argc, char *argv[] )
{

    clock_t start_time, end_time, diff_time_rec, diff_time_ite;
    long fib, nb;
    nb = strtol(argv[1], NULL, 10);

    start_time = clock();
    fib = fibo_recursif(nb);
    end_time = clock();
    diff_time_rec = end_time - start_time;
    fprintf(stdout, "La suite de Fibonacci pour %ld est : %ld\n", nb, fib);
    fprintf(stdout, "Le temps d’execution est de %u secondes\n", ((end_time - start_time) / CLOCKS_PER_SEC) );

    start_time = clock();
    fib = fibo_iteratif(nb);
    end_time = clock();
    diff_time_ite = end_time - start_time;

    fprintf(stdout, "La suite de Fibonacci pour %ld est : %ld\n", nb, fib);
    fprintf(stdout, "Le temps d’execution est de %u secondes\n", ((end_time - start_time) / CLOCKS_PER_SEC) );

    fprintf(stdout, "Différence entre Rec et Ite : %u\n", diff_time_rec - diff_time_ite);
   
        

    return EXIT_SUCCESS;
}				/* ----------  end of function main  ---------- */
