#!/usr/local/bin/bash

shopt -s nullglob
 
cd ~/.wallpaper

while true; do
	files=()
	for i in *.jpg *.png; do
		[[ -f $i ]] && files+=("$i")
	done
	range=${#files[@]}

	((range)) && feh --bg-scale "${files[RANDOM % range]}" && killall wbar && cd ~ && (sleep 4 && wbar -above-desk -bpress -pos bottom center -isize 24 -jumpf 0 -zoomf 2.0 -balfa 0) & && cd ~/.wallpaper
    min=5
    let "seconds=$min*60"
	sleep $seconds
done
