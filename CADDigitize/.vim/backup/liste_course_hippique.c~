/*
 * =====================================================================================
 *
 *       Filename:  liste_course_hippique.c
 *
 *    Description:  
 *
 *        Version:  1.0
 *        Created:  22.12.2012 10:56:21
 *       Revision:  none
 *       Compiler:  gcc
 *
 *         Author:  Loïc BARTOLETTI (), coder@tuxfamily.org
 *   Organization:  
 *
 * =====================================================================================
 */


#include	<stdio.h>
#include    <stdlib.h>

/* 
 * ===  FUNCTION  ======================================================================
 *         Name:  main
 *  Description:  
 * =====================================================================================
 */
int main ( int argc, char *argv[] )
{
    struct cheval_de_course {
        struct cheval_de_course *pt_succ;
        char nom[20];
        int dossard;
        float temps;
        int classement;
        struct cheval_de_course *pt_pred;
    };
    
    struct cheval_de_course *pt_fin = NULL;
    struct cheval_de_course *pt_nouveau, *pt_courant;
    struct cheval_de_course *liste_chevaux = NULL;
    
    printf("Entrez votre liste de chevaux.\n");
    printf("Terminez par -1 dans dossard.\n");
    int dossard=1;
    while(dossard != 0)
    {
        printf("Numéro du dossard :\n");
        scanf("%d", &dossard);
        if(dossard != 0)
        {
            pt_nouveau= malloc(sizeof(struct cheval_de_course));
    
            /* Initialisation */
            pt_nouveau->pt_pred = NULL;
            pt_nouveau->pt_succ = NULL;
    
            pt_nouveau->dossard = dossard;
            printf("Nom du cheval :\n");
            scanf("%s", pt_nouveau->nom);
            pt_nouveau->temps = 0.0;
            pt_nouveau->classement = 0;
        }
        /* Ajout dans la liste */
        if(liste_chevaux == NULL)
        {
            liste_chevaux = pt_nouveau;
            pt_fin = pt_nouveau;
        }
        else
        {
            pt_fin->pt_succ = pt_nouveau;
            pt_nouveau->pt_pred = pt_fin;
            pt_fin = pt_nouveau;
        }
    }

    printf("--- liste de tous les chevaux ---\n");
    printf("Nom            Dossard Temps Classement\n");
    pt_courant = liste_chevaux;
    while(pt_courant != NULL)
    {
        printf("%-15s %5d    ", pt_courant->nom, pt_courant->dossard);
        printf("%5.2f %5d\n", pt_courant->temps, pt_courant->classement);
        pt_courant=pt_courant->pt_succ;

    }
    return EXIT_SUCCESS;
}				/* ----------  end of function main  ---------- */
